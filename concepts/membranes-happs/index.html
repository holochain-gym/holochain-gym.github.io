<!DOCTYPE html><html lang="en" dir="ltr"><head>
  
    

  



<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Concepts: Membranes and hApps: Holochain Gym</title>
<meta property="og:title" content="Concepts: Membranes and hApps: Holochain Gym">

<meta name="generator" content="rocket 0.1">
<link rel="canonical" href="/concepts/membranes-happs/">



<meta name="description" content="Holochain Gym contains exercises, resources and trainings to learn holochain">
<meta property="og:description" content="Holochain Gym contains exercises, resources and trainings to learn holochain">

  
    <script src="../../37b22479.js"></script>
  
    <link rel="apple-touch-icon" sizes="180x180" href="../../assets/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../assets/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../assets/favicon-16x16.png">
<link rel="manifest" href="../../assets/webmanifest.json">
<link rel="mask-icon" href="../../assets/safari-pinned-tab.svg" color="#3f93ce">
<meta name="msapplication-TileColor" content="#1d3557">
<meta name="theme-color" content="#1d3557">

  
    <meta property="og:site_name" content="Holochain Gym">
<meta property="og:type" content="website">

<meta property="og:image" content="../../81886264.png">
<meta property="og:url" content="/concepts/membranes-happs/">

<meta name="twitter:card" content="summary_large_image">

  
    <link rel="stylesheet" href="../../be94ee0c.css">
<link rel="stylesheet" href="../../58e8f57f.css">
<link rel="stylesheet" href="../../1eb700f2.css">
<link rel="stylesheet" href="../../b8c01bc2.css">

  
    <noscript><link rel="stylesheet" href="/_merged_assets/_static/noscript.css"/></noscript>

  

<link rel="preload" href="../../6938c105.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../178f3cd5.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../de191b48.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../962426a7.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../d67d4614.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../fc9b1c6a.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../099c0a8b.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../d12199c0.js" as="script" crossorigin="anonymous">
</head>

  

  
  <body layout="layout-sidebar">
  

    
      <header id="main-header">
  <div class="content-area">
    
      <button id="mobile-menu-trigger" data-action="trigger-mobile-menu">
	<span class="sr-only">Show Menu</span>
	      <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon">
        <path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path>
      </svg>

</button>

    
      
	<a class="logo-link" href="/">
  <img src="../../a9d80dbb.svg" alt="A gym tool">
  <span>Holochain Gym</span>
</a>



    
      
  <a href="/concepts/" class="
          
           active 
        ">Concepts</a>
  <a href="/developers/" class="
          
          
        ">Developers</a>
  <a href="/whatsnext/" class="
          
          
        ">What's next</a>

    
      <a href="https://developer.holochain.org/docs/glossary/" class="">Glossary of Terms</a>
    
      <launch-dark-switch class="light-dark-switch" label="Toggle darkmode">Toggle darkmode</launch-dark-switch>


    
      <a href="https://forum.holochain.org/c/learning-library/gym/133" class="">Give us Feedback!</a>
    
      
	<a class="social-link" href="https://github.com/holochain-gym/" aria-label="Holochain Gym on GitHub" rel="noopener noreferrer" target="_blank">
		<span class="sr-only">GitHub</span>
		
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 16" fill="none">
  <title>GitHub</title>
  <path fill="currentColor" fill-rule="evenodd" d="M8.18391.249268C3.82241.249268.253906 3.81777.253906 8.17927c0 3.46933 2.279874 6.44313 5.451874 7.53353.3965.0991.49563-.1983.49563-.3965v-1.3878c-2.18075.4956-2.67638-.9912-2.67638-.9912-.3965-.8922-.89212-1.1895-.89212-1.1895-.69388-.4957.09912-.4957.09912-.4957.793.0992 1.1895.793 1.1895.793.69388 1.2887 1.88338.8922 2.27988.6939.09912-.4956.29737-.8921.49562-1.0904-1.78425-.1982-3.5685-.8921-3.5685-3.96496 0-.89212.29738-1.586.793-2.08162-.09912-.19825-.3965-.99125.09913-2.08163 0 0 .69387-.19825 2.18075.793.59475-.19825 1.28862-.29737 1.9825-.29737.69387 0 1.38775.09912 1.98249.29737 1.4869-.99125 2.1808-.793 2.1808-.793.3965 1.09038.1982 1.88338.0991 2.08163.4956.59475.793 1.28862.793 2.08162 0 3.07286-1.8834 3.66766-3.66764 3.86586.29737.3965.59474.8921.59474 1.586v2.1808c0 .1982.0991.4956.5948.3965 3.172-1.0904 5.4518-4.0642 5.4518-7.53353-.0991-4.3615-3.6676-7.930002-8.02909-7.930002z" clip-rule="evenodd"></path>
</svg>

		
	</a>

    
      <a href="/whatsnext/" class="">I'm ready! What's next?</a>
    
  </div>
</header>

    

    
  <div id="content-wrapper">
    <div class="content-area">
      
        <rocket-drawer id="sidebar">
  <nav slot="content" id="sidebar-nav">
    
      <a class="logo-link" href="/">
  <img src="../../a9d80dbb.svg" alt="A gym tool">
  <span>Holochain Gym</span>
</a>


    
      <rocket-navigation>
  <ul><li class="menu-item active">
<a href="/concepts/concepts/">Concepts</a>
<ul><li class="menu-item">
<a href="/concepts/dht/">DHT</a>

</li>
<li class="menu-item">
<a href="/concepts/source-chain/">Source-Chain</a>

</li>
<li class="menu-item">
<a href="/concepts/entry-graph/">Entry Graph</a>

</li>
<li class="menu-item">
<a href="/concepts/dna-zomes/">Dna and Zomes</a>

</li>
<li class="menu-item">
<a href="/concepts/validation-rules/">Validation Rules</a>

</li>
<li class="menu-item current">
<a href="/concepts/membranes-happs/">Membranes and hApps</a>
<ul>
  <li class="menu-item anchor">
    <a href="#membranes" class="anchor">Membranes</a>
  </li>
  <li class="menu-item anchor">
    <a href="#happs" class="anchor">hApps</a>
  </li>
  <li class="menu-item anchor">
    <a href="#try-it" class="anchor">Try it!</a>
  </li>
</ul>

</li></ul>
</li></ul>
  <div class="sidebar-bottom">
  <hr>
  <launch-dark-switch class="light-dark-switch" label="Toggle darkmode">Toggle darkmode</launch-dark-switch>


  <a href="https://github.com/holochain-gym/">Help and Feedback</a>
</div>

</rocket-navigation>

    
  </nav>
</rocket-drawer>

      
      
        <main class="markdown-body">
  
    <h1 id="concepts-membranes-and-happs"><a class="anchor" href="#concepts-membranes-and-happs"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Concepts: Membranes and hApps</h1>
<p><strong>TLDR: one special case for validation rules are membrane rules: they dictate who is allowed to enter one network and who isn't. Also, Dnas can be composed together into hApps.</strong></p>
<inline-notification type="tip" title="Useful reads">
<ul>
<li><a href="https://developer.holochain.org/concepts/2_application_architecture/">Core Concepts: Application Architecture</a></li>
<li><a href="https://en.wikipedia.org/wiki/Semipermeable_membrane">Semipermeable membrane</a></li>
</ul>
</inline-notification>
<h2 id="membranes"><a class="anchor" href="#membranes"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Membranes</h2>
<p>We have already seen that each <code>Dna</code> creates its own network, and that can leave out agents based on their actions inside the network.</p>
<p>Using the same mechanism of validation rules, we can define a special kind of validation rules in our <code>Dna</code>: <strong>validation for an agent trying to join the network</strong>.</p>
<p>When the agents install the <code>Dna</code>, they can pass a <strong><code>MembraneProof</code> in the process: a piece of data that is going to be used to validate whether this agent is valid or not in this network</strong>.</p>
<p>This allows Holochain to have private and decentralized networks, with a lot of flexibility around the mechanisms by which one agent is allowed into a network. For example, a membrane proof could be a verifyable claim from some authority, a ticket for an event, or the signature of one agent that's already inside the network.</p>
<p>Because all of this, <strong>the membrane rules dictate who gets to see what data in Holochain</strong> (except for the case of private entries). If you have access to a DHT, you can scan all the data that is published there, and copy it as you like. This is why it's really important to design appropriate membrane for your use case, thinking about access-control from the beginning.</p>
<h2 id="happs"><a class="anchor" href="#happs"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>hApps</h2>
<p>And what about hApps? They are really important, because at the end of the day they are what the Holochain conductor has to install.</p>
<p>When you define a hApp, you are defining a collection of <code>Dnas</code> that should be installed when that hApp is installed. Not only you can define new <code>Dnas</code> that the conductor didn't know about, you also can rely on existing <code>Dnas</code> being already present and running.</p>
<p>One of the most important mechanisms that we have available when designing hApps is <strong>cloning <code>Dnas</code></strong>. When you clone a <code>Dna</code>, you are using the exact same source code for that <code>Dna</code>, but overriding some configuration (its <code>uid</code> field or its <code>properties</code> field). These configurations change the hash for that <code>Dna</code>, so you are effectively creating a new network with the same functionality than the initial one, but with different configuration, and as a result different rules.</p>
<p>In this way, a hApp can define complex interactions between agents: you can have one <code>Dna</code> for every functionality for your app, or have different communities</p>
<h2 id="try-it"><a class="anchor" href="#try-it"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Try it!</h2>
<p>In this scenario, we have a hApp with two <code>Dna</code> slots: a "lobby" <code>Dna</code>, and a "privateChat" one. When the agents install the hApp, only the lobby one is installed, and that one doesn't have any membrane so all the agents can join without any issues.</p>
<p>You can see the list of <code>Cells</code> that each <code>Conductor</code> has installed in the <code>Conductor Admin</code> panel. A <code>Cell</code> is an instance of a running <code>Dna</code>, paired with the public key of the agent running it.</p>
<p>As we said, the "lobby" <code>Dna</code> is open, but the "privateChat" one is not: it has a very strict membrane rule that <strong>only allows the agents that have "supersecretcode" in their membrane proofs</strong>.</p>
<p>We are going to try to create 2 different private group chats with this hApp:</p>
<ol>
<li>Select the "Admin API" tab in the "Conductor Admin" panel.
<ul>
<li>You'll see the "Clone DNA" API - this is what we want.</li>
</ul>
</li>
<li>Select the "simulated-app" hApp.</li>
<li>Select the "privateChat" DNA slot.</li>
<li>Add some random text in the <code>uid</code> field.
<ul>
<li>This ensures that different private chats have different dna hashes, so they stay separate networks.</li>
<li>In a real hApp we would probably do this with properties.</li>
</ul>
</li>
<li>Input "supersecretcode" as the membrane proof.</li>
<li>Click "Execute"!
<ul>
<li>You should see that the "DHT Cells" panel has now only the agent that has cloned the <code>Dna</code>.</li>
<li>This is because we are the only ones that have installed this particular <code>Dna</code>.</li>
</ul>
</li>
<li>Select the "Cells" tab in the "Conductor Admin" panel.
<ul>
<li>You can see the 2 <code>Dnas</code> that are running in this node: the "lobby" one, and the "privateChat" one.</li>
</ul>
</li>
<li>Select the lobby <code>Dna</code>.</li>
<li>Select another agent, and confirm that they only one cell running in their conductor.</li>
<li>Clone the "privateChat" <code>Dna</code> with exactly the same <code>uid</code> as in step 4.
<ul>
<li>You should now see that the newly created network has two agents now: we have joined the first agent that cloned the <code>Dna</code>!</li>
</ul>
</li>
</ol>
<p>Repeat the process with other agents and with other <code>uid</code> to create multiple networks with multiple private chats. Have fun!</p>
<mdjs-story mdjs-story-name="Simple"></mdjs-story>
        
      

  
    <div class="content-footer">
  <p>
    Caught a mistake or want to contribute to the documentation?
    <a href="https://github.com/holochain-gym/holochain-gym.github.io/edit/master/./docs/concepts/membranes-happs.md">Edit this page on GitHub!</a>
  </p>
</div>

  
</main>

      
    </div>
  </div>


    
      <footer id="main-footer">
  
    

  
    <div id="footer-menu">
  <div class="content-area">
    
      <nav>
        <h3>Holochain</h3>
        <ul>
          
            <li>
              <a href="https://developer.holochain.org/docs/references/">Documentation</a>
            </li>
          
            <li>
              <a href="https://forum.holochain.org">Forum</a>
            </li>
          
        </ul>
      </nav>
    
      <nav>
        <h3>Gym</h3>
        <ul>
          
            <li>
              <a href="https://forum.holochain.org/c/learning-library/gym/133">Help and Feedback</a>
            </li>
          
            <li>
              <a href="https://github.com/holochain-gym/holochain.github.io/issues">Tasks for Contributors to the Gym</a>
            </li>
          
        </ul>
      </nav>
    
      <nav>
        <h3>Discover</h3>
        <ul>
          
            <li>
              <a href="https://holochain-open-dev.github.io/blog">Holochain Open Dev Blog</a>
            </li>
          
            <li>
              <a href="https://github.com/holochain-open-dev">Open Source Modules</a>
            </li>
          
        </ul>
      </nav>
    
      <nav>
        <h3>License</h3>
        <ul>
          
            <li>
              <a href="http://creativecommons.org/licenses/by/4.0/">This work is licensed under</a>
            </li>
          
            <li>
              <a href="http://creativecommons.org/licenses/by/4.0/">a Creative 
Commons Attribution 4.0</a>
            </li>
          
            <li>
              <a href="http://creativecommons.org/licenses/by/4.0/">International License</a>
            </li>
          
        </ul>
      </nav>
    
  </div>
</div>

  
</footer>

    

    
  


  

<script>
  window.__rocketServiceWorkerUrl = '/service-worker.js';
</script>




  



  


<script type="module" src="../../6938c105.js"></script>
<script type="module" src="../../d67d4614.js" inject-service-worker=""></script>
<script type="module" src="../../fc9b1c6a.js" mdjs-setup=""></script>

</body></html>