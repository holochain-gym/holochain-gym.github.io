<!DOCTYPE html><html lang="en" dir="ltr"><head>
  
    

  



<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Intermediate: Remote Call: Holochain Gym</title>
<meta property="og:title" content="Intermediate: Remote Call: Holochain Gym">

<meta name="generator" content="rocket 0.1">
<link rel="canonical" href="/developers/intermediate/call-remote/">



<meta name="description" content="Holochain Gym contains exercises, resources and trainings to learn holochain">
<meta property="og:description" content="Holochain Gym contains exercises, resources and trainings to learn holochain">

  
    <script src="../../../37b22479.js"></script>
  
    <link rel="apple-touch-icon" sizes="180x180" href="../../../assets/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../../assets/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../assets/favicon-16x16.png">
<link rel="manifest" href="../../../assets/webmanifest.json">
<link rel="mask-icon" href="../../../assets/safari-pinned-tab.svg" color="#3f93ce">
<meta name="msapplication-TileColor" content="#1d3557">
<meta name="theme-color" content="#1d3557">

  
    <meta property="og:site_name" content="Holochain Gym">
<meta property="og:type" content="website">

<meta property="og:image" content="../../../2274089f.png">
<meta property="og:url" content="/developers/intermediate/call-remote/">

<meta name="twitter:card" content="summary_large_image">

  
    <link rel="stylesheet" href="../../../be94ee0c.css">
<link rel="stylesheet" href="../../../490f016e.css">
<link rel="stylesheet" href="../../../a0513237.css">
<link rel="stylesheet" href="../../../b8c01bc2.css">

  
    <noscript><link rel="stylesheet" href="/_merged_assets/_static/noscript.css"/></noscript>

  

<link rel="preload" href="../../../41f79f1e.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../../0fafd573.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../../de191b48.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../../962426a7.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../../61a908a72.js" as="script" crossorigin="anonymous">
<link rel="preload" href="../../../70dd2230.js" as="script" crossorigin="anonymous">
</head>

  

  
  <body layout="layout-sidebar">
  

    
      <header id="main-header">
  <div class="content-area">
    
      <button id="mobile-menu-trigger" data-action="trigger-mobile-menu">
	<span class="sr-only">Show Menu</span>
	      <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon">
        <path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path>
      </svg>

</button>

    
      
	<a class="logo-link" href="/">
  <img src="../../../a9d80dbb.svg" alt="A gym tool">
  <span>Holochain Gym</span>
</a>



    
      
  <a href="/concepts/" class="
          
          
        ">Concepts</a>
  <a href="/developers/" class="
          
           active 
        ">Developers</a>

    
      <a href="https://developer.holochain.org/docs/concepts/" class="">Core Concepts</a>

    
      <launch-dark-switch class="light-dark-switch" label="Toggle darkmode">Toggle darkmode</launch-dark-switch>


    
      <a href="https://developer.holochain.org/docs/glossary/" class="">Glossary of Terms</a>
    
      <a href="https://forum.holochain.org/c/learning-library/gym/133" class="">Give us Feedback!</a>
    
      
	<a class="social-link" href="https://github.com/holochain-gym/" aria-label="Holochain Gym on GitHub" rel="noopener noreferrer" target="_blank">
		<span class="sr-only">GitHub</span>
		
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 16" fill="none">
  <title>GitHub</title>
  <path fill="currentColor" fill-rule="evenodd" d="M8.18391.249268C3.82241.249268.253906 3.81777.253906 8.17927c0 3.46933 2.279874 6.44313 5.451874 7.53353.3965.0991.49563-.1983.49563-.3965v-1.3878c-2.18075.4956-2.67638-.9912-2.67638-.9912-.3965-.8922-.89212-1.1895-.89212-1.1895-.69388-.4957.09912-.4957.09912-.4957.793.0992 1.1895.793 1.1895.793.69388 1.2887 1.88338.8922 2.27988.6939.09912-.4956.29737-.8921.49562-1.0904-1.78425-.1982-3.5685-.8921-3.5685-3.96496 0-.89212.29738-1.586.793-2.08162-.09912-.19825-.3965-.99125.09913-2.08163 0 0 .69387-.19825 2.18075.793.59475-.19825 1.28862-.29737 1.9825-.29737.69387 0 1.38775.09912 1.98249.29737 1.4869-.99125 2.1808-.793 2.1808-.793.3965 1.09038.1982 1.88338.0991 2.08163.4956.59475.793 1.28862.793 2.08162 0 3.07286-1.8834 3.66766-3.66764 3.86586.29737.3965.59474.8921.59474 1.586v2.1808c0 .1982.0991.4956.5948.3965 3.172-1.0904 5.4518-4.0642 5.4518-7.53353-.0991-4.3615-3.6676-7.930002-8.02909-7.930002z" clip-rule="evenodd"></path>
</svg>

		
	</a>

    
  </div>
</header>

    

    
  <div id="content-wrapper">
    <div class="content-area">
      
        <rocket-drawer id="sidebar">
  <nav slot="content" id="sidebar-nav">
    
      <a class="logo-link" href="/">
  <img src="../../../a9d80dbb.svg" alt="A gym tool">
  <span>Holochain Gym</span>
</a>


    
      <rocket-navigation>
  <ul><li class="menu-item">
<a href="/developers/requirements/">Requirements</a>
<ul><li class="menu-item">
<a href="/developers/requirements/setup/">Setup</a>

</li>
<li class="menu-item">
<a href="/developers/requirements/documentation/">Documentation</a>

</li>
<li class="menu-item">
<a href="/developers/requirements/rust/">Rust</a>

</li>
<li class="menu-item">
<a href="/developers/requirements/anatomy/">Anatomy</a>

</li></ul>
</li>
<li class="menu-item">
<a href="/developers/basic/">Basic</a>
<ul><li class="menu-item">
<a href="/developers/basic/zome-functions/">Zome functions</a>

</li>
<li class="menu-item">
<a href="/developers/basic/entries/">Creating Entries</a>

</li>
<li class="menu-item">
<a href="/developers/basic/hashes/">Playing with Hashes</a>

</li>
<li class="menu-item">
<a href="/developers/basic/links/">Attaching Links</a>

</li>
<li class="menu-item">
<a href="/developers/basic/source-chain/">Querying the Source Chain</a>

</li>
<li class="menu-item">
<a href="/developers/basic/elements/">Getting Elements</a>

</li></ul>
</li>
<li class="menu-item active">
<a href="/developers/intermediate/">Intermediate</a>
<ul><li class="menu-item">
<a href="/developers/intermediate/anchors/">Anchors</a>

</li>
<li class="menu-item">
<a href="/developers/intermediate/paths/">Paths</a>

</li>
<li class="menu-item">
<a href="/developers/intermediate/delete/">Delete</a>

</li>
<li class="menu-item">
<a href="/developers/intermediate/update/">Update</a>

</li>
<li class="menu-item current">
<a href="/developers/intermediate/call-remote/">Remote Call</a>
<ul>
  <li class="menu-item anchor">
    <a href="#hdk-actions" class="anchor">HDK actions</a>
  </li>
  <li class="menu-item anchor">
    <a href="#exercise" class="anchor">Exercise</a>
  </li>
  <li class="menu-item anchor">
    <a href="#solution" class="anchor">Solution</a>
  </li>
</ul>

</li>
<li class="menu-item">
<a href="/developers/intermediate/capability-tokens/">Capability Tokens</a>

</li>
<li class="menu-item">
<a href="/developers/intermediate/private-entry/">Private entry</a>

</li></ul>
</li>
<li class="menu-item">
<a href="/developers/advanced/">Advanced</a>

</li></ul>
  <div class="sidebar-bottom">
  <hr>
  <launch-dark-switch class="light-dark-switch" label="Toggle darkmode">Toggle darkmode</launch-dark-switch>


  <a href="https://github.com/holochain-gym/">Help and Feedback</a>
</div>

</rocket-navigation>

    
  </nav>
</rocket-drawer>

      
      
        <main class="markdown-body">
  
    <h1 id="intermediate-remote-call"><a class="anchor" href="#intermediate-remote-call"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Intermediate: Remote Call</h1>
<p><strong>Remote Calls</strong> are a method for calling a zome function of another agent in a Holochain DHT network. This remote function exection happens in p2p and relies heavily on capability tokens for the security model.
Remote calls are useful for the purposes of allowing other agents to create entries in your chain (private or public) on your behalf. This has many applications and could be used in things such as: shared authoring of posts or synchronous p2p communication!</p>
<p>Note the example of synchronous communication vs asynchronous. Remote calls require that the target be online in order to properly execute. If the target agent is not online then the call will fail with a network error.</p>
<p>Remote calls have deep ties with Capability Tokens. Not only do you need a Capability Tokens secret to send a remote call, but agents should also receive these secrets via remote calls to their own conductor!</p>
<h2 id="hdk-actions"><a class="anchor" href="#hdk-actions"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>HDK actions</h2>
<p>Lets take a look at the hdk function and detail each parameter of the function call, that will help give us a clearer picture of how it works and what is expected from us.</p>
<pre class="language-rust"><code class="language-rust"><span class="token keyword">pub</span> <span class="token keyword">fn</span> call_remote<span class="token operator">&lt;</span>I<span class="token operator">&gt;</span><span class="token punctuation">(</span>
    agent<span class="token punctuation">:</span> AgentPubKey<span class="token punctuation">,</span>
    zome<span class="token punctuation">:</span> ZomeName<span class="token punctuation">,</span>
    fn_name<span class="token punctuation">:</span> FunctionName<span class="token punctuation">,</span>
    cap_secret<span class="token punctuation">:</span> Option<span class="token operator">&lt;</span>CapSecret<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    payload<span class="token punctuation">:</span> I
<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> ExternResult<span class="token operator">&lt;</span>ZomeCallResponse<span class="token operator">&gt;</span>
<span class="token keyword">where</span>
    I<span class="token punctuation">:</span> Serialize <span class="token operator">+</span> Debug<span class="token punctuation">,</span>
</code></pre>
<ul>
<li><strong>agent</strong>: The first thing we need to pass is the <code>AgentPubKey</code>. This is the public key of the agent you wish to send the remote call to. You should already be familiar about the role of agent keys in holochain, but if not check out some of the previous exercises. <br></li>
<li><strong>zome</strong>: Name of zome that contains the function that we want to remote execute. <br></li>
<li><strong>fn_name</strong>: Name of the actual function that we want to evoke. <br></li>
<li><strong>cap_secret</strong>: The secret from the cabability token that the target agent authored and shared. It is possible to send <code>None</code> here but that will result in a authentification error unless the target zome function has been marked by the target agent as having <code>Unrestricted</code> Capability Access. <br></li>
<li><strong>payload</strong>: The data that will be passed into the zome function of the remote agent.</li>
</ul>
<h2 id="exercise"><a class="anchor" href="#exercise"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Exercise</h2>
<h3 id="problem-statement"><a class="anchor" href="#problem-statement"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Problem statement</h3>
<p>We need to code a small zome that has the following abilities:</p>
<ul>
<li>Create and share a post with another agent; p2p</li>
<li>Have the post persist so agent can read their incoming messages
<ul>
<li>Provide a method of getting posts an agent has received</li>
</ul>
</li>
<li>Allow the receiving of cap token secrets from other agents</li>
</ul>
<inline-notification type="tip" title="Exercise">
<ol>
<li>Go to the <a href="2.intermediate/2.call-remote">source code for the exercise</a>.</li>
<li>Implement all <code>unimplemented!()</code> functions in the exercise.</li>
<li>Run <code>npm test</code> to test your implementation.</li>
</ol>
</inline-notification>
<h3 id="relevant-hdk-documentation"><a class="anchor" href="#relevant-hdk-documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Relevant HDK documentation:</h3>
<ul>
<li><a href="https://docs.rs/hdk/0.0.100/hdk/p2p/fn.call_remote.html">call_remote</a>.</li>
</ul>
<h2 id="solution"><a class="anchor" href="#solution"><svg class="octicon octicon-link" viewBox="0 0 16 16" aria-hidden="true" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Solution</h2>
<p>If you get stuck implementing this exercise, you can always look at its <a href="2.intermediate/2.call-remote">solution</a>.</p>
        
      

  
    <div class="content-footer">
  <p>
    Caught a mistake or want to contribute to the documentation?
    <a href="https://github.com/holochain-gym/holochain-gym.github.io/edit/master/./docs/developers/intermediate/call-remote.md">Edit this page on GitHub!</a>
  </p>
</div>

  
</main>

      
    </div>
  </div>


    
      <footer id="main-footer">
  
    

  
    <div id="footer-menu">
  <div class="content-area">
    
      <nav>
        <h3>Holochain</h3>
        <ul>
          
            <li>
              <a href="https://developer.holochain.org/docs/references/">Documentation</a>
            </li>
          
            <li>
              <a href="https://forum.holochain.org">Forum</a>
            </li>
          
        </ul>
      </nav>
    
      <nav>
        <h3>Gym</h3>
        <ul>
          
            <li>
              <a href="https://forum.holochain.org/c/learning-library/gym/133">Help and Feedback</a>
            </li>
          
            <li>
              <a href="https://github.com/holochain-gym/holochain.github.io/issues">Tasks for Contributors to the Gym</a>
            </li>
          
        </ul>
      </nav>
    
      <nav>
        <h3>Discover</h3>
        <ul>
          
            <li>
              <a href="https://holochain-open-dev.github.io/blog">Holochain Open Dev Blog</a>
            </li>
          
            <li>
              <a href="https://github.com/holochain-open-dev">Open Source Modules</a>
            </li>
          
        </ul>
      </nav>
    
      <nav>
        <h3>License</h3>
        <ul>
          
            <li>
              <a href="http://creativecommons.org/licenses/by/4.0/">This work is licensed under</a>
            </li>
          
            <li>
              <a href="http://creativecommons.org/licenses/by/4.0/">a Creative 
Commons Attribution 4.0</a>
            </li>
          
            <li>
              <a href="http://creativecommons.org/licenses/by/4.0/">International License</a>
            </li>
          
        </ul>
      </nav>
    
  </div>
</div>

  
</footer>

    

    
  


  <script>
  async function serviceWorkerUpdate() {
  if ('serviceWorker' in navigator) {
    const oldReg = await navigator.serviceWorker.getRegistration();
    let oldSwState;
    if (oldReg && oldReg.active) {
      oldSwState = oldReg.active.state;
    }

    let refreshing;

    navigator.serviceWorker.addEventListener('controllerchange', async () => {
      if (refreshing) {
        return;
      }

      const newReg = await navigator.serviceWorker.getRegistration();
      let newSwState;
      if (newReg && newReg.active) {
        newSwState = newReg.active.state;
      }

      if (oldSwState === 'activated' && newSwState === 'activating') {
        refreshing = true;
        window.location.reload();
      }
    });
  }
}

serviceWorkerUpdate();

</script>


  



  

<script inject-service-worker="">
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker
          .register('../../../service-worker.js')
          .then(function() {
            console.log('ServiceWorker registered from "../../../service-worker.js".');
          })
          .catch(function(err) {
            console.log('ServiceWorker registration failed: ', err);
          });
      });
    }
  </script>
<script type="module" src="../../../41f79f1e.js"></script>
<script type="module" src="../../../61a908a72.js" mdjs-setup=""></script>

</body></html>